# PRD5: TRP3道具市场

## 1. 概述

### 1.1 背景
TRP3 Extended 提供了强大的道具制作功能，玩家可以创建：
- 物品（消耗品、装备、容器等）
- 文档（书籍、信件）
- 战役（任务线）

当前唯一的分享渠道是 WeakAuras.online，存在问题：
- 国内访问需要翻墙
- 作为WA的子功能，没有针对TRP3优化
- 缺乏分类和推荐机制
- 搜索体验差

### 1.2 目标
构建国内可访问的TRP3道具分享平台：
- 便捷的道具上传和下载
- 完善的分类和标签体系
- 社区评分和推荐
- 一键导入游戏

## 2. 用户故事

| 编号 | 故事 | 优先级 |
|------|------|--------|
| US-01 | 我想上传我制作的TRP3道具分享给他人 | P0 |
| US-02 | 我想浏览和搜索其他玩家分享的道具 | P0 |
| US-03 | 我想一键将道具导入到游戏中 | P0 |
| US-04 | 我想给道具评分和评论 | P1 |

## 3. 功能需求

### 3.1 道具上传 (P0)
- 解析 TRP3_Extended_ImpExport.lua 文件
- 提取道具元信息（名称、类型、图标、描述）
- 预览道具效果
- 设置分类和标签

### 3.2 道具浏览 (P0)
- 分类导航（物品/文档/战役）
- 标签筛选
- 搜索功能
- 排序（最新/最热/评分）

### 3.3 道具导入 (P0)
- 生成导入代码
- 一键复制
- 客户端自动写入（需Tauri支持）

### 3.4 评分系统 (P1)
- 五星评分
- 用户评论
- 下载统计

## 4. 数据结构

```typescript
interface Item {
  id: string;
  authorId: number;
  name: string;
  type: 'item' | 'document' | 'campaign';
  icon: string;
  description: string;
  tags: string[];
  importCode: string;
  downloads: number;
  rating: number;
  createdAt: Date;
}
```

## 5. 里程碑

| 阶段 | 功能 |
|------|------|
| M1 | 道具上传 + Lua解析 |
| M2 | 浏览 + 搜索 |
| M3 | 一键导入 |
| M4 | 评分评论 |
