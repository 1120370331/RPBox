# 成本计算空间

这里用来计算本项目的运营成本。

## 背景变量设定

| 项目 | 值 | 单位 | 备注 |
|------|------|------|------|
| 用户量 | 300 | 人 | 注册且产生数据的用户数量 |
| 日活跃人数 | 50 | 人 | 每日活跃使用各功能的人数 |

## 成本指标计算

### 用户产生数据项目

1. **人物卡与TRP备份**：40KB~150KB（核心玩家可能更多），认为所有用户均使用本功能
2. **剧情记录**：每个剧情约200条记录；每条记录平均长度15字中文+对话数据相关标记数据60字节；附带人物卡数据30-60KB；每个玩家每年可产出20-50段剧情；认为所有用户均使用本功能
3. **社区帖子**：包含文字内容（均为短篇小说级别）和图片内容；认为每个帖子都含缩略图1MB；认为每个帖子平均图片2-5张，每张大小5-10MB；认为每10位玩家中有1位进行发帖，年发帖5-20篇
4. **创意市场**：包含TRP快速导入字串和图片；认为每个道具都含缩略图1MB；每个道具详情介绍图片10MB；认为平均快速导入字串大小15KB-80KB；认为每30位玩家中有1位进行发帖，年发帖5-15篇
5. **公会**：认为每个公会含图文数据10MB；预计20个公会粗略计算
6. **个人头像**：每位用户的头像数据每个512KB
7. **其余小项目**：忽略不计


### 开发成本项目

1. **AI 辅助开发**：使用 Claude Pro 会员进行代码开发、文档编写、问题排查
   - Claude Pro 会员：$20/月（约 ¥145/月，按汇率 7.25）
   - 底价说明：Claude API 按量计费约 $15/百万 token（输入）+ $75/百万 token（输出），Pro 会员包月更划算

---

## 存储空间估算

基于上述估值，按保守/中等/激进三档计算年度存储需求：

### 1. 人物卡与TRP备份

| 档位 | 单用户 | 300用户合计 |
|------|--------|-------------|
| 保守 | 40 KB | 12 MB |
| 中等 | 95 KB | 28.5 MB |
| 激进 | 150 KB | 45 MB |

### 2. 剧情记录（年度增量）

每条记录：15字×3字节 + 60字节 = 105字节
每个剧情：200条 × 105字节 = 21 KB（文本）+ 人物卡数据

| 档位 | 单剧情 | 年剧情数 | 单用户年增量 | 300用户年增量 |
|------|--------|----------|--------------|---------------|
| 保守 | 21KB + 30KB = 51KB | 20 | 1 MB | 300 MB |
| 中等 | 21KB + 45KB = 66KB | 35 | 2.3 MB | 690 MB |
| 激进 | 21KB + 60KB = 81KB | 50 | 4 MB | 1.2 GB |

### 3. 社区帖子（年度增量）

发帖用户：300 × 10% = 30人

| 档位 | 缩略图 | 图片数×大小 | 单帖合计 | 年发帖 | 30人年增量 |
|------|--------|-------------|----------|--------|------------|
| 保守 | 1 MB | 2×5MB = 10MB | 11 MB | 5 | 1.65 GB |
| 中等 | 1 MB | 3.5×7.5MB = 26MB | 27 MB | 12 | 9.7 GB |
| 激进 | 1 MB | 5×10MB = 50MB | 51 MB | 20 | 30.6 GB |

### 4. 创意市场（年度增量）

发布道具用户：300 / 30 = 10人，年发布5-15个道具

| 档位 | 缩略图 | 详情图 | 字串 | 单道具 | 年道具数 | 10人年增量 |
|------|--------|--------|------|--------|----------|------------|
| 保守 | 1 MB | 10 MB | 15 KB | 11 MB | 5 | 550 MB |
| 中等 | 1 MB | 10 MB | 47 KB | 11 MB | 10 | 1.1 GB |
| 激进 | 1 MB | 10 MB | 80 KB | 11 MB | 15 | 1.65 GB |

### 5. 公会（固定）

| 项目 | 数量 | 单位大小 | 合计 |
|------|------|----------|------|
| 公会 | 20 | 10 MB | 200 MB |

### 6. 个人头像（固定）

| 项目 | 数量 | 单位大小 | 合计 |
|------|------|----------|------|
| 头像 | 300 | 512 KB | 150 MB |

---

## 汇总表

| 项目 | 保守 | 中等 | 激进 | 备注 |
|------|------|------|------|------|
| 人物卡备份 | 12 MB | 28.5 MB | 45 MB | 固定 |
| 剧情记录 | 300 MB | 690 MB | 1.2 GB | 年增量 |
| 社区帖子 | 1.65 GB | 9.7 GB | 30.6 GB | 年增量 |
| 创意市场 | 550 MB | 1.1 GB | 1.65 GB | 年增量 |
| 公会 | 200 MB | 200 MB | 200 MB | 固定 |
| 个人头像 | 150 MB | 150 MB | 150 MB | 固定 |
| **首年合计** | **~3 GB** | **~12 GB** | **~34 GB** | |

## 关键指标

| 指标 | 保守 | 中等 | 激进 |
|------|------|------|------|
| 首年存储需求 | 3 GB | 12 GB | 34 GB |
| 月均存储增长 | 210 MB | 960 MB | 2.8 GB |
| 单用户年均存储 | 10 MB | 40 MB | 113 MB |
| 图片占比 | ~85% | ~92% | ~96% |

---

## 服务器内存估算

基于 50 日活用户、300 注册用户的场景，计算各组件内存需求。

### 假设条件

| 参数 | 值 | 说明 |
|------|------|------|
| 日活用户 | 50 | 同时在线峰值约 20-30 人 |
| 平均并发请求 | 5-10 | 非高峰期 |
| 峰值并发请求 | 20-30 | 高峰期 |
| 平均请求/用户/分钟 | 2-5 | 浏览、同步等操作 |

### 1. Go 后端服务

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| 基础运行时 | 20 MB | 30 MB | 50 MB | Go runtime + 基础库 |
| Gin 框架 | 10 MB | 15 MB | 20 MB | 路由、中间件 |
| 连接池（DB） | 20 MB | 40 MB | 60 MB | 10-30 个连接 × 2MB |
| 连接池（Redis） | 5 MB | 10 MB | 15 MB | 5-15 个连接 |
| 请求处理缓冲 | 20 MB | 50 MB | 100 MB | 并发请求内存 |
| 图片处理临时 | 30 MB | 60 MB | 100 MB | 缩略图生成等 |
| **Go 后端合计** | **~105 MB** | **~205 MB** | **~345 MB** | |

### 2. PostgreSQL

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| shared_buffers | 128 MB | 256 MB | 512 MB | 推荐为总内存 25% |
| work_mem | 16 MB | 32 MB | 64 MB | 排序/哈希操作 |
| maintenance_work_mem | 32 MB | 64 MB | 128 MB | 维护操作 |
| effective_cache_size | 256 MB | 512 MB | 1 GB | OS 文件缓存 |
| 连接开销 | 50 MB | 100 MB | 150 MB | 10-30 连接 × 5MB |
| WAL 缓冲 | 16 MB | 32 MB | 64 MB | 写入缓冲 |
| **PostgreSQL 合计** | **~500 MB** | **~1 GB** | **~2 GB** | |

### 3. Redis

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| 基础进程 | 3 MB | 5 MB | 10 MB | Redis 进程本身 |
| 会话缓存 | 5 MB | 10 MB | 20 MB | 50用户 × 100KB-400KB |
| JWT Token 缓存 | 2 MB | 5 MB | 10 MB | Token 黑名单等 |
| 热点数据缓存 | 20 MB | 50 MB | 100 MB | 帖子列表、人物卡摘要 |
| 速率限制计数器 | 1 MB | 2 MB | 5 MB | 限流数据 |
| 输出缓冲区 | 10 MB | 20 MB | 40 MB | 客户端输出 |
| **Redis 合计** | **~40 MB** | **~90 MB** | **~185 MB** | |

### 4. 官网 + Web/移动端社区浏览

> 附加服务：宣传官网 + 客户端下载页 + Web端社区浏览（只读为主）
> 移动端不做原生App，使用响应式Web即可

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| Nginx 进程 | 10 MB | 20 MB | 30 MB | 静态文件服务 |
| 静态资源缓存 | 50 MB | 100 MB | 200 MB | 官网HTML/CSS/JS |
| Web端并发连接 | 20 MB | 40 MB | 80 MB | 额外Web用户 |
| 客户端下载带宽 | - | - | - | 不占内存，仅带宽 |
| **附加服务合计** | **~80 MB** | **~160 MB** | **~310 MB** | |

> 注：Web端社区浏览复用 Go 后端 API，不额外增加后端内存

### 5. 操作系统开销

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| Linux 内核 | 100 MB | 150 MB | 200 MB | 基础系统 |
| 文件系统缓存 | 200 MB | 400 MB | 600 MB | 热点文件缓存 |
| 网络缓冲 | 30 MB | 50 MB | 80 MB | TCP 缓冲区 |
| **系统合计** | **~330 MB** | **~600 MB** | **~880 MB** | |

---

## CPU 核心数估算

基于 50 日活用户场景，分析各组件的 CPU 使用特征。

### 请求负载分析

| 指标 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| 日活用户 | 50 | 50 | 50 | |
| 活跃时段 | 4h | 6h | 8h | 晚间高峰 |
| 请求/用户/小时 | 30 | 60 | 120 | 页面浏览+API调用 |
| 高峰 QPS | 0.1 | 0.14 | 0.2 | 50×60÷3600 |
| 峰值 QPS（×3） | 0.3 | 0.42 | 0.6 | 高峰放大系数 |

> 50日活的 QPS 非常低，远未达到 CPU 瓶颈

### 1. Go 后端 CPU 消耗

| 操作类型 | CPU 特征 | 单次耗时 | 占比 | 说明 |
|----------|----------|----------|------|------|
| 普通 API 请求 | 低 | 1-5ms | 70% | JSON 序列化、DB查询 |
| 人物卡同步 | 中 | 10-50ms | 15% | 数据解析、压缩 |
| 图片缩略图生成 | **高** | 100-500ms | 5% | CPU 密集型 |
| 剧情记录解析 | 中 | 20-100ms | 8% | 文本处理 |
| JWT 验证 | 低 | <1ms | 2% | 签名校验 |

**Go 后端 CPU 估算**：

| 场景 | CPU 利用率 | 核心需求 | 说明 |
|------|------------|----------|------|
| 空闲 | 0-1% | 0.01 核 | 无请求时 |
| 普通负载 | 2-5% | 0.05 核 | 日常使用 |
| 图片处理峰值 | 50-100% | 0.5-1 核 | 单张大图处理 |
| **推荐预留** | - | **0.5-1 核** | 应对突发 |

### 2. PostgreSQL CPU 消耗

| 操作类型 | CPU 特征 | 说明 |
|----------|----------|------|
| 简单查询（索引） | 低 | <1ms，几乎不占CPU |
| 复杂 JOIN | 中 | 列表查询、关联查询 |
| 全文搜索 | 高 | 若使用 pg 全文索引 |
| 排序/聚合 | 中 | ORDER BY, GROUP BY |
| 连接管理 | 低 | 连接建立/维护 |

**PostgreSQL CPU 估算**：

| 场景 | CPU 利用率 | 核心需求 | 说明 |
|------|------------|----------|------|
| 空闲 | 0-1% | 0.01 核 | 仅维护进程 |
| 普通查询 | 1-3% | 0.03 核 | 索引命中 |
| 复杂查询 | 10-30% | 0.3 核 | JOIN + 排序 |
| **推荐预留** | - | **0.3-0.5 核** | |

### 3. Redis CPU 消耗

| 特性 | 说明 |
|------|------|
| 单线程模型 | 主线程处理所有命令 |
| 命令处理 | 10万+ QPS 能力 |
| 50日活场景 | CPU 使用率 <1% |

**Redis CPU 估算**：

| 场景 | CPU 利用率 | 核心需求 |
|------|------------|----------|
| 当前规模 | <1% | 0.01 核 |
| **推荐预留** | - | **0.1 核** |

### 4. 系统进程 & MeiliSearch（可选）

| 组件 | CPU 需求 | 说明 |
|------|----------|------|
| 系统进程 | 0.1-0.2 核 | sshd, cron, 日志等 |
| MeiliSearch | 0.2-0.5 核 | 若启用搜索服务 |
| Nginx/反向代理 | 0.05 核 | SSL 终结、路由 |
| 官网+Web端 | 0.02 核 | 静态文件服务+API复用 |

---

## CPU 汇总表

| 组件 | 日常使用 | 峰值负载 | 说明 |
|------|----------|----------|------|
| Go 后端 | 0.05 核 | 1 核 | 图片处理是峰值来源 |
| PostgreSQL | 0.1 核 | 0.5 核 | 复杂查询时 |
| Redis | 0.01 核 | 0.1 核 | 几乎可忽略 |
| 官网+Web端 | 0.02 核 | 0.1 核 | Nginx静态服务 |
| 系统 + 其他 | 0.2 核 | 0.4 核 | |
| **总计** | **~0.4 核** | **~2.1 核** | |

### CPU 核心数建议

| 日活规模 | 推荐核心数 | 说明 |
|----------|------------|------|
| 50 人 | **2 核** | 含官网+Web端，日常<20%利用率 |
| 200 人 | 2-4 核 | 开始需要关注并发 |
| 500+ 人 | 4+ 核 | 考虑分离服务 |

### CPU 瓶颈分析

| 瓶颈点 | 触发条件 | 解决方案 |
|--------|----------|----------|
| 图片处理 | 多用户同时上传大图 | 限制并发、队列处理 |
| 数据库查询 | 缺少索引的复杂查询 | 添加索引、优化SQL |
| Go GC | 大量内存分配 | 对象池、减少分配 |

> **结论**：50日活场景下，**2核完全足够**。CPU 日常利用率不到 20%，主要瓶颈在于偶发的图片处理任务。

---

## 内存汇总表

| 组件 | 保守 | 中等 | 激进 | 占比(中等) |
|------|------|------|------|------|
| Go 后端 | 105 MB | 205 MB | 345 MB | 9% |
| PostgreSQL | 500 MB | 1 GB | 2 GB | 46% |
| Redis | 40 MB | 90 MB | 185 MB | 4% |
| 官网+Web端 | 80 MB | 160 MB | 310 MB | 7% |
| 操作系统 | 330 MB | 600 MB | 880 MB | 27% |
| 余量（峰值缓冲） | 145 MB | 145 MB | 280 MB | 7% |
| **总计** | **~1.2 GB** | **~2.2 GB** | **~4 GB** | 100% |

### 服务器配置建议

| 场景 | 推荐配置 | 说明 |
|------|----------|------|
| 起步阶段 | 2核4G | 含官网+Web端，有余量应对峰值 |
| 稳定运营 | 2核8G | 中等场景推荐，充足余量 |
| 未来扩展 | 4核16G | 用户量增长至1000+时考虑 |

### 内存优化建议

1. **PostgreSQL 调优**：50日活场景下，shared_buffers 设为 256MB 即可
2. **Go 连接池**：数据库连接池 max=20，Redis 连接池 max=10
3. **Redis maxmemory**：设置 100MB 上限，使用 LRU 淘汰策略
4. **图片处理**：使用流式处理，避免大图片一次性加载到内存

---

## 报价清单

### 核心服务

| 供应商 | 配置 | 存储 | 价格 | 单位 | 备注 |
|--------|------|------|------|------|------|
| Sealos | 2核4G | - | 49.53 | 元/月 | 容器化，存储另计 |
| Sealos | 2核8G | - | - | 元/月 | 待确认 |
| 阿里云ECS | 2核4G | 40GB | 168.91 | 元/月 | 传统VPS |
| 阿里云ECS | 2核8G | 40GB | - | 元/月 | 待确认 |

### 域名

| 域名 | 价格 | 单位 | 备注 |
|------|------|------|------|
| totalrpbox.com | 98 | 元/年 | 已租用 |

### 阿里云 OSS 存储

| 容量 | 价格 | 单位 | 备注 |
|------|------|------|------|
| 100GB | 126 | 元/年 | 资源包 |
| 500GB | 172 | 元/年 | 资源包 |

### 阿里云 OSS 流量

| 流量类型 | 价格 | 单位 | 备注 |
|----------|------|------|------|
| 公网流出（闲时） | 0.25 | 元/GB | 直接下载 |
| 公网流出（忙时） | 0.50 | 元/GB | 直接下载 |
| CDN 回源流出 | 0.15 | 元/GB | 经CDN加速 |
| 内网流出 | 0 | 免费 | 同地域ECS |
| 公网流入 | 0 | 免费 | 上传免费 |

---

## 流量成本估算

### 流量来源分析

| 流量类型 | 单次大小 | 频次估算 | 月流量 | 说明 |
|----------|----------|----------|--------|------|
| **客户端下载** | | | | |
| 安装包下载 | 20 MB | 20次/月 | 0.4 GB | 新用户+更新 |
| **图片访问** | | | | |
| 缩略图浏览 | 50 KB | 50人×50次/天 | 3.75 GB | 列表页 |
| 原图查看 | 500 KB | 50人×10次/天 | 7.5 GB | 详情页 |
| 剧情插图 | 500 KB | 50人×10次/天 | 7.5 GB | 剧情回顾 |
| **Web/移动端** | | | | |
| 额外访问 | - | +20% | 3.8 GB | 非客户端访问 |
| **月流量合计** | | | **~23 GB** | 中等场景 |

> 注：人物卡仅存数据库，无图片流量

### 流量成本计算

#### 方案A：直连 OSS（无CDN）

| 场景 | 月流量 | 单价(均价) | 月成本 | 年成本 |
|------|--------|------------|--------|--------|
| 保守 | 12 GB | ¥0.35 | ¥4.2 | ¥50 |
| 中等 | 23 GB | ¥0.35 | ¥8.1 | ¥97 |
| 激进 | 50 GB | ¥0.35 | ¥17.5 | ¥210 |

> 均价按闲时0.25+忙时0.50各50%估算 = 0.375，取0.35

#### 方案B：OSS + CDN（推荐）

CDN 命中率约 80%，仅 20% 回源

| 场景 | 月流量 | 回源流量 | 回源成本 | CDN费用 | 月合计 | 年合计 |
|------|--------|----------|----------|---------|--------|--------|
| 保守 | 12 GB | 2.4 GB | ¥0.36 | ¥2.4 | ¥2.8 | ¥34 |
| 中等 | 23 GB | 4.6 GB | ¥0.7 | ¥4.6 | ¥5.3 | ¥64 |
| 激进 | 50 GB | 10 GB | ¥1.5 | ¥10 | ¥11.5 | ¥138 |

> CDN 费用按 0.2元/GB 估算（阿里云CDN流量包）

---

## 存储空间分类汇总

### 数据库存储（PostgreSQL）

存储在服务器本地磁盘，需要备份

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| 人物卡备份 | 12 MB | 28.5 MB | 45 MB | 文本+压缩数据，仅存DB |
| 剧情记录（文本） | 50 MB | 115 MB | 200 MB | 仅对话文本 |
| 社区帖子（文本） | 10 MB | 30 MB | 60 MB | 帖子内容 |
| 创意市场（字串） | 5 MB | 15 MB | 25 MB | 导入字串 |
| 用户/公会元数据 | 20 MB | 40 MB | 80 MB | 账号、配置等 |
| **数据库首年合计** | **~100 MB** | **~230 MB** | **~410 MB** | |

### 对象存储（OSS）

图片等大文件存储

#### 剧情记录插图估算

- 每个剧情约 200 条记录
- 平均每 50 条记录附带 1 张 5MB 插图
- 每个剧情约 4 张插图 ≈ 20MB
- 假设 40% 的剧情有插图（纯文字剧情不含图）

| 档位 | 年剧情数/用户 | 有图剧情 | 单剧情插图 | 300用户年增量 |
|------|---------------|----------|------------|---------------|
| 保守 | 20 | 40% = 8个 | 20 MB | 48 GB |
| 中等 | 35 | 40% = 14个 | 20 MB | 84 GB |
| 激进 | 50 | 40% = 20个 | 20 MB | 120 GB |

#### OSS 存储汇总

| 项目 | 保守 | 中等 | 激进 | 说明 |
|------|------|------|------|------|
| 剧情记录（插图） | 48 GB | 84 GB | 120 GB | 平均50条1张5MB |
| 社区帖子（图片） | 1.64 GB | 9.67 GB | 30.5 GB | 缩略图+原图 |
| 创意市场（图片） | 545 MB | 1.08 GB | 1.62 GB | 缩略图+详情图 |
| 公会图文 | 200 MB | 200 MB | 200 MB | |
| 个人头像 | 150 MB | 150 MB | 150 MB | |
| **OSS首年合计** | **~51 GB** | **~95 GB** | **~152 GB** | |

> 注：剧情插图是最大存储项，建议考虑图片压缩策略（如限制上传大小、自动压缩）

### 备份存储需求

每日备份，保留3个月（90天）

| 备份项 | 单次大小(中等) | 90天累计 | 说明 |
|--------|----------------|----------|------|
| 数据库全量 | ~230 MB | ~20.7 GB | 每日全量备份 |
| 数据库增量 | ~5 MB | ~450 MB | 每日增量（可选） |
| OSS图片 | 不备份 | - | 图片丢失可重传 |
| **备份总需求** | | **~21 GB** | 按全量备份算 |

> 备份策略建议：数据库每日全量备份，图片不备份（用户可重传）

---

## 最终报价清单（Sealos 方案）

> 适用场景：50日活 / 300注册用户

### Sealos 单价参考

| 资源 | 单价 | 单位 |
|------|------|------|
| CPU | ¥12.33 | 核/月 |
| 内存 | ¥6.22 | G/月 |
| 存储 | ¥0.38 | G/月 |
| 端口 | ¥5.04 | 个/月 |
| 流量 | ¥0.80 | G |

### 运营成本

| 序号 | 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|------|--------|--------|------|
| 1 | Sealos CPU | 2核 | ¥24.66 | ¥295.92 | ¥12.33×2 |
| 2 | Sealos 内存 | 4G | ¥24.87 | ¥298.44 | ¥6.22×4 |
| 3 | Sealos 存储 | 40G | ¥15.08 | ¥180.96 | ¥0.38×40 |
| 4 | Sealos 端口 | 2个 | ¥10.08 | ¥120.96 | ¥5.04×2（HTTP+HTTPS）|
| 5 | Sealos 流量 | 10G | ¥8.00 | ¥96.00 | ¥0.80×10（API流量）|
| | **Sealos 小计** | 2C4G40G | **¥82.69** | **¥992.28** | |
| 6 | 对象存储 | 阿里云 OSS 100GB | ¥10.5 | ¥126 | 资源包 |
| 7 | OSS流量 | CDN回源+CDN | ¥5.3 | ¥64 | 23GB/月 |
| 8 | 数据库备份 | OSS冷存储 | ¥0.5 | ¥6 | 1GB×90天 |
| 9 | 客户端下载 | GitHub Releases | ¥0 | ¥0 | 免费托管 |
| 10 | 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| 11 | SSL证书 | Let's Encrypt | ¥0 | ¥0 | 免费自动续期 |
| 12 | 杂项预留 | 邮件/监控等 | ¥5 | ¥60 | 预留额度 |
| | **运营小计** | | **¥112** | **¥1346** | |

### 开发成本

| 序号 | 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|------|--------|--------|------|
| 1 | AI 辅助开发 | Claude Pro 会员 | ¥145 | ¥1740 | $20/月，汇率7.25 |
| | **开发小计** | | **¥145** | **¥1740** | |

> **底价说明**：Claude API 按量计费约 $15/百万token（输入）+ $75/百万token（输出），Pro 会员包月更划算

### 总成本汇总

| 类别 | 月成本 | 年成本 | 占比 |
|------|--------|--------|------|
| 运营成本 | ¥112 | ¥1346 | 44% |
| 开发成本 | ¥145 | ¥1740 | 56% |
| **总计** | **¥257** | **¥3086** | 100% |

---

## 采购清单

> 服务器配置已包含：桌面客户端API + 官网 + Web/移动端社区浏览 + 客户端下载

### 方案一：起步阶段 - Sealos（最低成本）

适用场景：50日活，验证产品可行性

| 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|--------|--------|------|
| 主服务器 | Sealos 2核4G | ¥49.53 | ¥594.36 | 容器化部署 |
| 服务器存储 | 20GB SSD | 含在服务器 | - | DB存储 |
| 对象存储 | 阿里云 OSS 100GB | ¥10.5 | ¥126 | 资源包，首年够用 |
| OSS流量 | CDN回源+CDN | ¥5.3 | ¥64 | 23GB/月 |
| 数据库备份 | OSS冷存储 | ¥0.5 | ¥6 | 约1GB×90天 |
| 客户端下载 | GitHub Releases | ¥0 | ¥0 | 免费托管 |
| 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| SSL | Let's Encrypt | ¥0 | ¥0 | 免费 |
| **合计** | | **~¥74** | **~¥888** | |

### 方案一B：起步阶段 - 阿里云（传统VPS）

适用场景：50日活，需要完整服务器控制权

| 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|--------|--------|------|
| 主服务器 | 阿里云ECS 2核4G | ¥168.91 | ¥2026.92 | 含40GB存储 |
| 服务器带宽 | 1Mbps固定带宽 | ¥23 | ¥276 | 或按量0.8元/GB |
| 对象存储 | 阿里云 OSS 100GB | ¥10.5 | ¥126 | 资源包 |
| OSS流量 | CDN回源+CDN | ¥5.3 | ¥64 | 23GB/月 |
| 数据库备份 | OSS冷存储 | ¥0.5 | ¥6 | 约1GB×90天 |
| 客户端下载 | GitHub Releases | ¥0 | ¥0 | 免费托管 |
| 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| SSL | Let's Encrypt | ¥0 | ¥0 | 免费 |
| 杂项预留 | 邮件/快照/监控等 | ¥10 | ¥120 | 预留额度 |
| **合计** | | **~¥226** | **~¥2717** | |

### 方案二：稳定运营 - Sealos（推荐）

适用场景：100-200日活，功能完善

| 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|--------|--------|------|
| 主服务器 | Sealos 2核8G | ¥99 | ¥1188 | 估算，待确认 |
| 对象存储 | 阿里云 OSS 100GB | ¥10.5 | ¥126 | 资源包 |
| OSS流量 | CDN回源+CDN | ¥5.3 | ¥64 | 23GB/月 |
| 数据库备份 | OSS冷存储 | ¥1 | ¥12 | 约5GB×90天 |
| 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| SSL | Let's Encrypt | ¥0 | ¥0 | 免费 |
| 杂项预留 | 邮件/监控等 | ¥5 | ¥60 | 预留额度 |
| **合计** | | **~¥129** | **~¥1548** | |

### 方案二B：稳定运营 - 阿里云

适用场景：100-200日活，传统部署

| 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|--------|--------|------|
| 主服务器 | 阿里云ECS 2核8G | ¥250 | ¥3000 | 估算，含存储 |
| 服务器带宽 | 1Mbps固定带宽 | ¥23 | ¥276 | 或按量0.8元/GB |
| 对象存储 | 阿里云 OSS 100GB | ¥10.5 | ¥126 | 资源包 |
| OSS流量 | CDN回源+CDN | ¥5.3 | ¥64 | 23GB/月 |
| 数据库备份 | OSS冷存储 | ¥1 | ¥12 | 约5GB×90天 |
| 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| SSL | Let's Encrypt | ¥0 | ¥0 | 免费 |
| 杂项预留 | 邮件/快照/监控等 | ¥10 | ¥120 | 预留额度 |
| **合计** | | **~¥308** | **~¥3696** | |

### 方案三：规模扩展

适用场景：300+日活，高并发

| 项目 | 选型 | 月成本 | 年成本 | 备注 |
|------|------|--------|--------|------|
| 主服务器 | Sealos 4核16G | ¥200 | ¥2400 | 估算 |
| 对象存储 | 阿里云 OSS 500GB | ¥14.3 | ¥172 | 资源包 |
| OSS流量 | CDN回源+CDN | ¥11.5 | ¥138 | 50GB/月 |
| 数据库备份 | OSS冷存储 | ¥2 | ¥24 | 约10GB×90天 |
| 域名 | totalrpbox.com | ¥8.17 | ¥98 | 已租用 |
| SSL | 通配符证书 | ¥100 | ¥1200 | 多子域名 |
| **合计** | | **~¥336** | **~¥4032** | |

### 成本对比总览

| 方案 | 供应商 | 月成本 | 年成本 | 适用日活 | OSS容量 |
|------|--------|--------|--------|----------|---------|
| 起步阶段 | Sealos | ¥74 | ¥888 | 50人 | 100GB |
| 起步阶段 | 阿里云 | ¥193 | ¥2321 | 50人 | 100GB |
| 稳定运营 | Sealos | ¥124 | ¥1488 | 100-200人 | 100GB |
| 稳定运营 | 阿里云 | ¥275 | ¥3300 | 100-200人 | 100GB |
| 规模扩展 | Sealos | ¥336 | ¥4032 | 300+人 | 500GB |

### Sealos vs 阿里云对比

| 对比项 | Sealos | 阿里云ECS |
|--------|--------|-----------|
| 价格 | 便宜约 65% | 较贵 |
| 部署方式 | 容器化 | 传统VPS |
| 运维复杂度 | 低（托管） | 中（自运维） |
| 灵活性 | 中 | 高（完整控制） |
| 存储 | 按需购买 | 含40GB |
| 适合场景 | 快速启动、低成本 | 需要完整控制权 |

### 存储架构说明

```
┌─────────────────────────────────────────────────────────┐
│                    服务器本地存储                         │
│  ┌─────────────────┐  ┌─────────────────────────────┐   │
│  │   PostgreSQL    │  │      本地文件/OSS           │   │
│  │   ~230 MB/年    │  │     ~12 GB/年(中等)        │   │
│  │   (需要备份)     │  │     (图片，可不备份)        │   │
│  └─────────────────┘  └─────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼ 每日备份
┌─────────────────────────────────────────────────────────┐
│                  OSS 冷存储（备份）                       │
│                   ~21 GB (90天)                         │
└─────────────────────────────────────────────────────────┘
```

### 成本优化建议

1. **一台服务器搞定全部**：API、官网、Web端社区、客户端下载页都部署在同一台服务器
2. **移动端用响应式Web**：不做原生App，复用Web端代码
3. **客户端下载用GitHub**：免费且全球CDN加速
4. **图片不备份**：用户可重传，节省大量备份空间
5. **数据库备份用冷存储**：OSS归档存储价格极低（约0.015元/GB/月）
