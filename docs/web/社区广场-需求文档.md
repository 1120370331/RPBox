# 社区广场 - 功能需求文档

## 页面标识
- **页面名称**：社区广场
- **路由路径**：`/community`
- **页面类型**：列表页
- **访问权限**：公开（未登录可浏览）

---

## 一、功能性需求

### 1.1 核心功能

**帖子列表展示**
- 显示所有公开帖子
- 每个帖子卡片包含：
  - 标题
  - 作者头像、昵称
  - 发布时间
  - 内容摘要（前150字）
  - 封面图（如果有）
  - 标签列表
  - 互动数据：点赞数、评论数、收藏数
  - 关联公会（如果有）

**筛选功能**
- 按标签筛选（多选）
- 按时间排序：最新、最热
- 按公会筛选（下拉选择）
- 清空筛选按钮

**搜索功能**
- 关键词搜索（标题+内容）
- 实时搜索建议
- 搜索历史记录（本地存储）

**分页/加载**
- 初始加载20条
- 滚动到底部自动加载更多
- 加载中状态提示
- 无更多内容提示

### 1.2 交互功能

**未登录用户**
- 可浏览所有内容
- 点击点赞/评论/收藏时，弹出登录提示
- 点击"发布帖子"按钮，显示"下载客户端以发布内容"引导

**已登录用户**
- 可点赞/取消点赞（即时反馈）
- 可收藏/取消收藏
- 点击评论跳转到帖子详情页
- 点击"发布帖子"按钮，显示"下载客户端以发布内容"引导

**帖子卡片交互**
- 点击卡片任意位置跳转到详情页
- 悬停效果：卡片轻微上浮，阴影加深
- 点击作者头像/昵称跳转到用户主页
- 点击标签筛选该标签的帖子
- 点击公会名称跳转到公会详情页

### 1.3 侧边栏功能

**热门标签**
- 显示使用最多的10个标签
- 显示每个标签的帖子数量
- 点击标签进行筛选

**推荐公会**
- 显示5个活跃公会
- 显示公会图标、名称、成员数
- 点击跳转到公会详情页

**快捷操作**
- "发布帖子"按钮（引导下载客户端）
- "我的帖子"链接（需登录）
- "我的收藏"链接（需登录）

### 1.4 空状态处理

**无帖子**
- 显示空状态插图
- 提示文案："暂无帖子，快来发布第一篇吧！"
- 引导下载客户端按钮

**搜索无结果**
- 显示空状态插图
- 提示文案："未找到相关帖子，试试其他关键词"
- 清空搜索按钮

**筛选无结果**
- 显示空状态插图
- 提示文案："该条件下暂无帖子"
- 清空筛选按钮

---

## 二、系统配色方案

### 2.1 主色调
```css
/* 主色系 */
--color-primary: #4B3621      /* 深棕色 - 主要文字 */
--color-accent: #B87333       /* 铜色 - 链接、按钮 */
--color-secondary: #856a52    /* 中棕色 - 次要文字 */

/* 背景色 */
--color-bg-page: #EED9C4      /* 羊皮纸色 - 页面背景 */
--color-bg-card: #fff         /* 白色 - 卡片背景 */
--color-bg-hover: #f5f0eb     /* 浅米色 - 悬停背景 */

/* 边框色 */
--color-border: #e5d4c1       /* 浅边框 */
--color-border-dark: #d4a373  /* 深边框 */
```

### 2.2 功能色
```css
/* 互动功能 */
--color-like: #e74c3c         /* 点赞 - 红色 */
--color-comment: #3498db      /* 评论 - 蓝色 */
--color-favorite: #f39c12     /* 收藏 - 橙色 */

/* 状态色 */
--color-success: #28a745      /* 成功 */
--color-warning: #f57c00      /* 警告 */
--color-error: #e74c3c        /* 错误 */
```

### 2.3 文字色
```css
--text-primary: #4B3621       /* 主要文字 */
--text-secondary: #856a52     /* 次要文字 */
--text-tertiary: #a89984      /* 辅助文字 */
--text-link: #B87333          /* 链接文字 */
--text-link-hover: #8B5A2B    /* 链接悬停 */
```

---

## 三、数据接口需求

### 3.1 获取帖子列表
```
GET /api/v1/posts
Query参数：
- page: 页码
- limit: 每页数量
- tags: 标签ID列表（逗号分隔）
- guild_id: 公会ID
- keyword: 搜索关键词
- sort: 排序方式（latest/hot）

返回：
{
  posts: Post[],
  total: number,
  has_more: boolean
}
```

### 3.2 点赞/取消点赞
```
POST /api/v1/posts/:id/like
DELETE /api/v1/posts/:id/like
```

### 3.3 收藏/取消收藏
```
POST /api/v1/posts/:id/favorite
DELETE /api/v1/posts/:id/favorite
```

### 3.4 获取热门标签
```
GET /api/v1/tags/hot
返回：前10个热门标签及帖子数
```

### 3.5 获取推荐公会
```
GET /api/v1/guilds/recommended
返回：5个活跃公会
```

---

## 四、性能要求

- 首屏加载时间 < 2秒
- 图片懒加载
- 滚动加载防抖（500ms）
- 点赞/收藏操作乐观更新（即时反馈）

---

## 五、其他说明

**移动端适配**
- 卡片布局改为单列
- 侧边栏移至底部或隐藏
- 筛选器改为抽屉式

**SEO优化**
- 页面标题：RPBox社区 - 魔兽世界RP玩家交流平台
- Meta描述：分享你的RP故事，发现更多精彩内容
- 结构化数据标记

**无障碍**
- 所有交互元素支持键盘操作
- 图片添加alt属性
- 合理的标题层级
